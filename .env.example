# Nominatim Production Configuration
# Copy this file to .env and configure the values for your environment

# =============================================================================
# DATABASE CONFIGURATION (Required)
# =============================================================================

# PostgreSQL RDS Configuration
PGHOST=your-rds-endpoint.region.rds.amazonaws.com
PGPORT=5432
PGDATABASE=nominatim
PGUSER=nominatim
PGPASSWORD=your-secure-password
NOMINATIM_PASSWORD=your-secure-password

# =============================================================================
# OSM DATA CONFIGURATION (Required - choose one)
# =============================================================================

# Option 1: Download from URL
PBF_URL=https://download.geofabrik.de/europe/france-latest.osm.pbf

# Option 2: Use local file (stored in EFS)
# PBF_PATH=/efs/data/your-data.osm.pbf

# Replication for updates (optional)
REPLICATION_URL=https://download.geofabrik.de/europe/france-updates/

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================

# Number of threads for import and indexing
THREADS=4

# OSM2PGSQL cache size in MB (adjust based on available memory)
OSM2PGSQL_CACHE=4000

# API server configuration
NOMINATIM_API_POOL_SIZE=8
NOMINATIM_QUERY_TIMEOUT=60
NOMINATIM_REQUEST_TIMEOUT=60

# =============================================================================
# IMPORT CONFIGURATION
# =============================================================================

# Import style (full, admin, street, address, poi, or extratags)
IMPORT_STYLE=full

# Reverse geocoding only (faster import, limited functionality)
REVERSE_ONLY=false

# Keep PBF file after import (recommended for EFS storage)
KEEP_PBF=true

# =============================================================================
# OPTIONAL DATA IMPORTS
# =============================================================================

# Wikipedia importance data (improves search ranking)
IMPORT_WIKIPEDIA=false

# GB postcodes (UK only)
IMPORT_GB_POSTCODES=false

# US postcodes (US only)
IMPORT_US_POSTCODES=false

# TIGER address data (US only)
IMPORT_TIGER_ADDRESSES=false

# =============================================================================
# REPLICATION CONFIGURATION
# =============================================================================

# Update interval in seconds (default: 86400 = 24 hours)
REPLICATION_UPDATE_INTERVAL=86400

# Recheck interval in seconds (default: 900 = 15 minutes)
REPLICATION_RECHECK_INTERVAL=900

# =============================================================================
# AWS ECS SPECIFIC CONFIGURATION
# =============================================================================

# These are typically set by ECS task definition
# PROJECT_DIR=/nominatim
# EFS_DIR=/efs

# =============================================================================
# SECURITY NOTES
# =============================================================================

# 1. Never commit this file with real credentials to version control
# 2. Use AWS Secrets Manager or ECS secrets for production passwords
# 3. Ensure RDS security groups only allow access from ECS tasks
# 4. Use IAM roles for ECS tasks instead of hardcoded AWS credentials